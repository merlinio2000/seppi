% Adapted from zaccaria-af
\usepackage[dvipsnames]{xcolor}
\usepackage[utf8]{inputenc}
\usepackage[ngerman]{babel}
\usepackage[T1]{fontenc}
\usepackage{lmodern}
\usepackage[left=5mm, right=5mm, bottom=15mm, top=15mm]{geometry}
\usepackage{lastpage}
\usepackage{ulem}
\usepackage{bm}
\usepackage{tikz}
\usepackage{pgfplots}
\usetikzlibrary{positioning, calc, fit, matrix, decorations, angles, quotes, babel, 3d, arrows.meta, shadings, circuits.logic.IEC, circuits.ee.IEC, automata}
\usepackage{wrapfig}
\usepackage[explicit]{titlesec}

\usepackage{listings} % code highlighting

\usepackage{titling}
\usepackage{calc}
\usepackage{fancyhdr}
\usepackage{enumitem}
\setlist{nolistsep, leftmargin = 4mm}

\usepackage{multicol}
\usepackage{adjustbox}
\usepackage{multirow}
\usepackage{csvsimple}
\usepackage{colortbl}

\usepackage{textcomp}
\usepackage{amsmath}
\usepackage{esint}
\usepackage{amssymb}    % \cdots
\usepackage{cancel}     % strike-through terms
\usepackage{gensymb}
\usepackage{siunitx}

\usepackage{parskip}
\usepackage{tcolorbox}
\usepackage{mathtools, amsthm, color, comment, graphicx, environ}

\newcommand{\createmainpagestyle}{
	\fancypagestyle{main}{
		\fancyhf{}
		\lfoot{M. Maggi}
		\lhead{FS23}
		\rhead{Höhere Mathematik 2, Zusammenfassung}
		\cfoot{\today}
		\rfoot{Seite \thepage \protect{ }von \pageref{LastPage}}
		\renewcommand{\headrulewidth}{0.5pt}
		\renewcommand{\footrulewidth}{0.5pt}
	}
}

\newcommand\scalemath[2]{\scalebox{#1}{\mbox{\ensuremath{\displaystyle #2}}}}

\newcommand{\N}{\mathbb{N}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\C}{\mathbb{C}}

\newcommand{\iter}[2]{#1^{(#2)}}
\newcommand{\iterk}[1]{#1^{(k)}}


\renewcommand{\v}{\vec}

\def\MLine#1{\par\hspace*{-\leftmargin}\parbox{\textwidth}{\[#1\]}}


% pgfplot layers
\pgfplotsset{compat=1.7}                                                                % Version? für Plots  
\pgfdeclarelayer{bg}
\pgfdeclarelayer{l1}
\pgfdeclarelayer{l2}
\pgfdeclarelayer{l3}
\pgfdeclarelayer{tl1}
\pgfdeclarelayer{tl2}
\pgfdeclarelayer{tl3}
\pgfsetlayers{bg,l3,l2,l1,main,tl1,tl2,tl3}

\setlength{\columnseprule}{1pt}
\def\columnseprulecolor{\color{twoColor}}

\newcommand{\raisedrulefill}[2][0ex]{\leaders\hbox{\rule[#1]{1pt}{#2}}\hfill}

\titleformat{\section}{\sffamily\bfseries\boldmath\large}{}{0pt}{\colorbox{primaryheader}{\parbox[c][3mm]{\linewidth -
			6pt}{\textcolor{numColor}{#1}}}}
\titleformat{\subsection}{\sffamily\bfseries\boldmath}{}{0pt}{\colorbox{secondaryheader}{\parbox[c][2mm]{\linewidth -
			6pt}{\textcolor{numColor}{#1}}}}
\titleformat{\subsubsection}{\sffamily\bfseries\boldmath}{}{0pt}{\textcolor{thirdheader}{#1 \raisedrulefill[0.4ex]{0.5pt}}}
\titleformat{\paragraph}[runin]{\sffamily\bfseries\boldmath}{}{0pt}{\uline{#1}}
\newcommand{\dif}{\mathop{}\!\mathrm{d}}
\definecolor{primaryheader}{HTML}{6153CC}
\definecolor{secondaryheader}{HTML}{D44D5C}
\definecolor{thirdheader}{HTML}{3F6C51}

\definecolor{numColor}{HTML}{FFFFFF}
\definecolor{twoColor}{HTML}{3F6C51}


% configure code highlighting
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

% TODO this doesnt work
\lstdefinestyle{mystyle}{
	backgroundcolor=\color{backcolour},
	commentstyle=\color{codegreen},
	keywordstyle=\color{magenta},
	numberstyle=\tiny\color{codegray},
	stringstyle=\color{codepurple},
	basicstyle=\ttfamily\footnotesize,
	breakatwhitespace=false,
	breaklines=true,
	captionpos=b,
	keepspaces=true,
	numbers=left,
	numbersep=5pt,
	showspaces=false,
	showstringspaces=false,
	showtabs=false,
	tabsize=2
}
\lstset{style=mystyle}
%end code highlighting

\newcommand{\overrideplainstyle}{
	\fancypagestyle{plain}{
		\fancyhf{}
		\rfoot{Seite \thepage \protect{ }von \pageref{LastPage}}
		\renewcommand{\headrulewidth}{0pt}
		\renewcommand{\footrulewidth}{0pt}
	}
}

\renewcommand{\familydefault}{\sfdefault}


